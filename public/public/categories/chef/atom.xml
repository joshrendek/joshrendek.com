<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Chef | Josh Rendek]]></title>
  <link href="http://joshrendek.com/categories/chef/atom.xml" rel="self"/>
  <link href="http://joshrendek.com/"/>
  <updated>2016-12-15T16:05:34-05:00</updated>
  <id>http://joshrendek.com/</id>
  <author>
    <name><![CDATA[Josh Rendek]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Dealing With Cascading Failures With Chef Server]]></title>
    <link href="http://joshrendek.com/2012/12/dealing-with-cascading-failures-with-chef-server/"/>
    <updated>2012-12-06T23:23:00-05:00</updated>
    <id>http://joshrendek.com/2012/12/dealing-with-cascading-failures-with-chef-server</id>
    <content type="html"><![CDATA[<p><a href="http://www.opscode.com/">Chef</a> is awesome. Being able to recreate your entire environment from a recipe is an inredibly powerful tool, and I had started using Chef a few months ago. When I had initially configured the Chef server I hadn&rsquo;t paid much attention to the couchdb portion of it until I had a chef-server hiccup. Here are a few things to watch out for when running chef-server:</p>

<ul>
<li>Setup CouchDB <a href="http://wiki.apache.org/couchdb/Compaction">compaction</a> - Chef had a CouchDB size of 30+GB (after compaction it was only a few megabytes).</li>
<li>When resizing instances, make sure you setup RabbitMQ to use a <a href="http://www.rabbitmq.com/configure.html">NODENAME</a>. If you don&rsquo;t you&rsquo;ll run into an issue with RabbitMQ losing the database&rsquo;s that were setup (by default, they&rsquo;re based on hostname&hellip; so if you resize a EC2 instance the hostname may change, and you&rsquo;ll either have to do some moving around or manually set the NODENAME to the previous hostname).</li>
<li>Client&rsquo;s may fail to validate after this - requiring a regeneration of the validation.pem, which is fine since this file is only used for the initial bootstrap of a server.</li>
<li>Make sure you run your chef recipes you setup (for instance monitoring) on your chef-server.</li>
</ul>


<p>I hope these tips will be helpful to other people when they run into a Chef/CouchDB/RabbitMQ issue after a server resize or hostname change. Another really helpful place is #chef on freenode&rsquo;s IRC servers.</p>
]]></content>
  </entry>
  
</feed>
